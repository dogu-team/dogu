---
sidebar_position: 3
title: Self-Hosted Dogu
locale: en
---

import {
  getBrowserPlatform,
  BrowserPlatform,
} from '@site/src/platform/platform.ts';

import dost_macos_api_url_input from '@site/static/img/dost/dost_macos_api_url_input.png';
import dost_windows_api_url_input from '@site/static/img/dost/dost_windows_api_url_input.png';

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import BrowserOnly from '@docusaurus/BrowserOnly';

:::info PREREQUISITES
This document explains how to start Dogu with self-hosted.
:::

You can set up Dogu with self-hosted.

## Hardware Requirements

|                          | Minimum Requirements                           |
| :----------------------: | ---------------------------------------------- |
| <b>Operating System</b>  | Ubuntu(x86_64), macOS(x86_64), Windows(x86_64) |
|       <b> CPU </b>       | 8 Cores                                        |
|     <b> Memory </b>      | 16 GB RAM                                      |
| <b> Free Disk Space </b> | SSD 128GB                                      |
|  <b> Dependencies </b>   | Docker, Docker-Compose                         |

## Set up Dogu

### Create a Volume Path

<Tabs groupId="os" defaultValue="linux">
<TabItem value="linux" label="Linux" default>

```
sudo mkdir /var/lib/dogu
sudo mkdir /var/lib/dogu/nexus-data
sudo chown 200 -R /var/lib/dogu/nexus-data
```

</TabItem>

<TabItem value="windows" label="Windows">

```
icacls "C:\var\lib\dogu\nexus-data" /setowner 200 /T
```

</TabItem>
</Tabs>

:::note
You can replace the `/var/lib/dogu` path created above with the `VOLUME_PATH` value in the docker-compose.env file to be created in the next step.
:::

### Create docker-compose.env File

1. Create docker-compose.env file
2. Paste all of [this file](https://github.com/dogu-team/dogu/blob/main/docker-compose.env) to docker-compose.env file

:::note
The GITLAB_ROOT_ACCESS_TOKEN value
After Dogu is executed, obtain a token in the [Issuing the GitLab Root Access Token](/self-hosted/get-started#get-the-gitlab-root-access-token) below and reset it.
:::

### Create docker-compose.yml

1. Create docker-compose.yml file
2. Paste all of [this file](https://github.com/dogu-team/dogu/blob/main/docker-compose.yml) to docker-compose.yml file

### Run Dogu

Run the following command in the directory where the docker-compose.env and docker-compose.yml files are located.

```

docker compose -f ./docker-compose.yml --env-file ./docker-compose.env up -d

```

### Get the GitLab Root Access Token

A GitLab root access token is required to run Dogu.
The following are the steps to get a GitLab root access token.

- Access to GitLab

  - Access it with the DOGU_HOST address value specified in docker-compose.env and the 8080 port.
    :::info
    e.g. localhost:8080 (GitLab takes about 5 minutes to run.)
    :::

- Log in with the GitLab root account

  - Log in with the GITLAB_ROOT_PASSWORD specified in docker-compose.env.
    <img
      src="/img/get-started/gitlab-login.png"
      style={{ width: 400, display: 'block' }}
    />

- Get Access Tokens
  - Click the avatar in the top right corner of GitLab and select Edit Profile.
  - Click Access Tokens on the left sidebar of the User Settings page.
  - Set the following values and generate a token.
    - Write the Token name.
    - Click the x button on Expiration data to remove the expiration period.
    - Click all Select Scopes.
      <img
        src="/img/get-started/gitlab-issue-access-token.png"
        style={{ width: 400, display: 'block' }}
      />
  - Check the Access Token generated.
    <img
      src="/img/get-started/gitlab-check-access-token.png"
      style={{ width: 400, display: 'block' }}
    />

### Set the GitLab Access Token

Add the above value to GITLAB_ROOT_ACCESS_TOKEN in docker-compose.env already created.

```
 e.g. GITLAB_ROOT_ACCESS_TOKEN=glpat-Z5Zq-XkrtKjzq5FiAMAA
```

### Run Dogu again

Run the following command in the directory where the docker-compose.env and docker-compose.yml files are located. (It is not necessary to stop the previously
executed docker-compose.)

```
   docker compose -f ./docker-compose.yml --env-file ./docker-compose.env up -d
```

### Browse Web Page

Dogu Console: DOGU_HOST:3001  
Dogu Gitlab: DOGU_HOST:8080

### Installing Dost

After downloading, please refer to [Dost Installation](/host-and-device/host/get-started#installation) for installation

### Running Dost

Run the dost agent that can connect to the dogu console.

- Configuring Dost connection environment

  - Set the connection URL using the DOGU_HOST value set in the [Create docker-compose.env File](/self-hosted/get-started#create-docker-composeenv-file).
    `ex. localhost:4000`

  <BrowserOnly>
    {() => (
      <Tabs groupId="os" defaultValue={getBrowserPlatform('windows')}>
        <TabItem value="windows" label="Windows" default>
          <img src={dost_windows_api_url_input} style={{ width: 600 }} />
        </TabItem>
        <TabItem value="macos" label="macOS">
          <img src={dost_macos_api_url_input} style={{ width: 600 }} />
        </TabItem>
      </Tabs>
    )}
  </BrowserOnly>

## Connect Device to Device Farm

See [Quick start - Device farm](/get-started/device-farm)

## NOTICE

The available GitLab version is 15.10.0. (Please ignore GitLab security warnings and upgrade recommendations.)
