---
sidebar_position: 1
title: Self-hosted
locale: ko
---

import {
  getBrowserPlatform,
  BrowserPlatform,
} from '@site/src/platform/platform.ts';

import dost_macos_api_url_input from '@site/static/img/dost/dost_macos_api_url_input.png';
import dost_windows_api_url_input from '@site/static/img/dost/dost_windows_api_url_input.png';

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import BrowserOnly from '@docusaurus/BrowserOnly';

이 문서는 Dogu를 Self-Hosted로 시작하는 방법에 대해 설명합니다.

## 하드웨어 요구사항

|                          | Minimum Requirements                           |
| :----------------------: | ---------------------------------------------- |
| <b>Operating System</b>  | Ubuntu(x86_64), macOS(x86_64), Windows(x86_64) |
|       <b> CPU </b>       | 8 Cores                                        |
|     <b> Memory </b>      | 16 GB RAM                                      |
| <b> Free Disk Space </b> | SSD 128GB                                      |
|  <b> Dependencies </b>   | Docker, Docker-Compose                         |

## Docker를 이용한 Dogu 설치

### Docker 및 Docker-compose 준비

Docker 및 Docker-compose가 설치되어 있지 않은 경우 아래 링크를 참고하여 설치합니다.

- [Docker 설치](https://docs.docker.com/engine/install/)
- [Docker-compose 설치](https://docs.docker.com/compose/install/)

### 네트워크 보안 설정

Dogu를 실행하는 장비의 인/아웃바운드 트래픽 허용 설정에서 해당 장비의 ip도 접근 허용 추가해 주세요.  
( 위에서 설정할 ip는 [docker-compose.env 파일 생성](/get-started/installation/self-hosted/#docker-composeenv-파일-생성)에서 설정한 DOGU_HOST값과 동일한 값입니다. )

### 마운트 경로 생성

<Tabs groupId="os" defaultValue="linux">
<TabItem value="linux" label="Linux" default>

```
sudo mkdir /var/lib/dogu
sudo mkdir /var/lib/dogu/nexus-data
sudo chown 200 -R /var/lib/dogu/nexus-data
```

</TabItem>

<TabItem value="windows" label="Windows">

```
icacls "C:\var\lib\dogu\nexus-data" /setowner 200 /T
```

</TabItem>
</Tabs>

:::note
위에서 생성한 `/var/lib/dogu` 경로를
다음 단계에서 생성할 docker-compose.env 파일의 `VOLUME_PATH` 값으로 대체해도 괜찮습니다.
:::

### docker-compose.env 파일 생성

1. 빈 docker-compose.env 파일 생성
2. [파일](https://github.com/dogu-team/dogu/blob/main/docker-compose.env) 내용을 docker-compose.env 파일에 붙여넣기

### docker-compose.yml 설정

1. 빈 docker-compose.yml 파일 생성
2. [파일](https://github.com/dogu-team/dogu/blob/main/docker-compose.yml) 내용을 docker-compose.yml 파일에 붙여넣기

### Dogu 실행

docker-compose.env, docker-compose.yml 파일이 있는 디렉토리에서 아래 명령어를 실행합니다.

```
docker compose -f ./docker-compose.yml --env-file ./docker-compose.env up  -d
```

### 웹 페이지

Dogu Console: DOGU_HOST:3001

### Agent 설치

[github releases](https://github.com/dogu-team/dogu/releases?q=dost&expanded=true)에서 dost를 다운로드 해주세요.

다운로드 후 설치는 [Agent 설치하기](/device-farm/host/get-started#설치)를 참고해주세요.

### Dost 실행

dogu console에 연결할 수 있는 dost를 실행합니다.

- Dost 접속 환경 설정

  - [docker-compose.env 파일 생성](/get-started/installation/self-hosted#docker-composeenv-파일-생성)에서 설정한 DOGU_HOST값을 사용하여 접속 URL을 설정합니다.
    :::note
    ex. http://DOGU_HOST:4000
    :::

  <BrowserOnly>
    {() => (
      <Tabs groupId="os" defaultValue={getBrowserPlatform('windows')}>
        <TabItem value="windows" label="Windows" default>
          <img src={dost_windows_api_url_input} style={{ width: 600 }} />
        </TabItem>
        <TabItem value="macos" label="macOS">
          <img src={dost_macos_api_url_input} style={{ width: 600 }} />
        </TabItem>
      </Tabs>
    )}
  </BrowserOnly>

## 디바이스를 디바이스 팜에 연결하기

[Quick start - Device farm](/get-started/tutorials/device-farm) 문서에서 확인할 수 있습니다.

## Issues

설치 도중 문제가 발생할 경우 아래 커뮤니티에서 도움을 요청해 주시기 바랍니다.

- [Discord Community](https://discord.com/invite/bVycd6Tu9g)
- [Github Issues](https://github.com/dogu-team/dogu/issues)

### Known Issues

1. Dogu 콘솔(웹 클라이언트)의 프로토콜이 `http`인 경우, 브라우저에서 클립보드로 복사하는 기능을 사용할 수 없습니다.

## FAQ

- decoding 'command': invalid command line string

  Dogu 실행 시, `* error decoding 'command': invalid command line string` 에러가 발생할 경우  
  docker-compose.yml 파일에 아래 값 들을 명시적으로 작성해 주세요.  
  ${REDIS_PASSWORD}, ${TURN_SERVER_USERNAME}, ${TURN_SERVER_PASSWORD}, ${DOGU_HOST}

  ```
  ex.
  command: redis-server --requirepass ${REDIS_PASSWORD}
  -> command: redis-server --requirepass dogu-onprem

  user=${TURN_SERVER_USERNAME}:${TURN_SERVER_PASSWORD}, realm=${DOGU_HOST}
  -> user=admin:dogu-onprem, realm=${DOGU_HOST} <- env 파일에서 설정해주신 값을 넣어주세요
  ```
